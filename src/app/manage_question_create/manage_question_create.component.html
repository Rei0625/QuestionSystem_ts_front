<!DOCTYPE html>
<html lang="ja">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>å•é¡Œä½œæˆç”»é¢ï¼ˆç”»é¢è¨­è¨ˆï¼‰</title>
  </head>
  <body>
    <div class="back-button" (click)="navigateToQuestion()">æˆ»ã‚‹</div>
    <div class="create-button" (click)="navigateToQuestionsCreate()">å•é¡Œä¸€æ‹¬ä½œæˆ</div>

    <div id="questionCreate" class="section">
      <h2>å•é¡Œä½œæˆ</h2>

      <form>
        <!-- åˆ†é¡é¸æŠ -->
        <div class="form-group">
          <label>åˆ†é¡</label>
          <div class="select-group">
            <select
              id="select-examgroup"
              name="select-examgroup"
              [(ngModel)]="select_gernre"
              (ngModelChange)="selectToExamgroup($event)"
            >
              <option [ngValue]=""></option>
              @for(gernre of gernres; track $index){
              <option [ngValue]="gernre">{{ gernre.examgroup_name }}</option>
              }
            </select>

            <select id="select-category" name="select-category" [(ngModel)]="select_category">
              <option [ngValue]=""></option>
              @if(select_gernre){ @for (category of select_gernre.categorys; track $index) {
              <option [ngValue]="category">{{ category.category_name }}</option>
              } }
            </select>
          </div>
        </div>

        <!-- å•é¡Œæ–‡ -->
        <div class="form-group">
          <label>å•é¡Œæ–‡</label>
          <textarea
            rows="4"
            placeholder="ä¾‹ï¼‰TCPã¨UDPã®é•ã„ã¯ï¼Ÿ"
            id="question-text"
            name="question-text"
            [(ngModel)]="question_text"
          ></textarea>
        </div>

        <!-- é¸æŠè‚¢ã®å½¢å¼ -->
        <div class="form-group">
          <label>é¸æŠè‚¢ã®å½¢å¼</label>
          <select
            id="select-option-type"
            name="select-option-type"
            [(ngModel)]="option_type"
            (ngModelChange)="selectToOption_type($event)"
          >
            <option value="radiobutton">ğŸ”˜ ãƒ©ã‚¸ã‚ªãƒœã‚¿ãƒ³</option>
            <option value="checkbox">â¬œï¸ ãƒã‚§ãƒƒã‚¯ãƒœãƒƒã‚¯ã‚¹</option>
          </select>
        </div>

        <!-- é¸æŠè‚¢æ•° -->
        <div class="form-group">
          <label>é¸æŠè‚¢æ•°</label>
          <select
            id="select-option-count"
            name="select-option-count"
            [(ngModel)]="count"
            (ngModelChange)="selectToOption_count($event)"
          >
            @for(i of numbers; track $index){
            <option [value]="i">{{ i }}</option>
            }
          </select>
        </div>

        <!-- é¸æŠè‚¢ -->
        <div class="form-group">
          <label>é¸æŠè‚¢</label>
          <div class="choice-group">
            @if(option_type == 'radiobutton'){ @if(counts){ @for(count of counts; track count){
            <div class="choice-wrapper">
              <input
                type="radio"
                name="correctAnswer"
                [(ngModel)]="radio_answer_index"
                [value]="count"
              />
              <input
                type="text"
                name="question-option-{{ count }}"
                [(ngModel)]="question_option[count - 1]"
                placeholder="é¸æŠè‚¢ {{ count }}"
              />
            </div>
            } }
            <p class="note">â€» æ­£è§£ã¨ãªã‚‹é¸æŠè‚¢ã«ãƒã‚§ãƒƒã‚¯ã‚’å…¥ã‚Œã¦ãã ã•ã„ã€‚</p>
            }
          </div>

          <div class="choice-group">
            @if(option_type == 'checkbox'){ @if(counts){ @for(count of counts; track $index){
            <div class="choice-wrapper">
              <input
                type="checkbox"
                name="correctAnswer-{{ count - 1 }}"
                [(ngModel)]="checkbox_answer[count - 1]"
                [value]="count - 1"
              />
              <input
                type="text"
                name="question-option-{{ count - 1 }}"
                [(ngModel)]="question_option[count - 1]"
                placeholder="é¸æŠè‚¢ {{ count }}"
              />
            </div>
            } }
            <p class="note">â€» æ­£è§£ã¨ãªã‚‹é¸æŠè‚¢ã«ãƒã‚§ãƒƒã‚¯ã‚’å…¥ã‚Œã¦ãã ã•ã„ã€‚</p>
            }
          </div>
        </div>

        <!-- è§£èª¬ -->
        <div class="form-group">
          <label>è§£èª¬</label>
          <textarea
            rows="3"
            placeholder="ä¾‹ï¼‰TCPã¯ã‚³ãƒã‚¯ã‚·ãƒ§ãƒ³ã‚’ç¢ºç«‹ã—ã¦ã‹ã‚‰é€šä¿¡ã—ã¾ã™ãŒã€UDPã¯ãã®ã¾ã¾ãƒ‡ãƒ¼ã‚¿ã‚’é€ã‚Šã¾ã™ã€‚"
            id="answer-explanation"
            name="answer-explanation"
            [(ngModel)]="question_code"
          ></textarea>
        </div>

        <!-- ä½œæˆãƒœã‚¿ãƒ³ -->
        <div class="form-submit">
          @if(errorMessage){
          <label style="color: red">{{ errorMessage }}</label>
          } @if(createMessage){
          <label style="color: green">{{ createMessage }}</label>
          } @if(editActive == true){
          <button type="submit" class="submit-button" (click)="EditQuestion()">æ›´æ–°</button> }
          @else{
          <button type="submit" class="submit-button" (click)="createQuestion()">ä½œæˆ</button>
          }
        </div>
      </form>
    </div>
  </body>
</html>
